<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta Information -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings Page</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">

    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!--Reference to javascript in the settings.js file-->
    <script src="/javascript/settings.js"></script>

    <!-- Navbar (Included from Partial) -->
    <%- include("partials/navbar") %>

    <!-- Main Content Wrapper -->
    <div class="content-wrapper">
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <a href="/home" class="nav-link">Home</a>
            <a href="/expenses" class="nav-link">Expenses</a>
            <a href="/helpfultips" class="nav-link">Helpful Tips</a>
            <a href="/settings" class="nav-link active">Settings</a>
            <a href="/profile" class="nav-link">Profile</a>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <h1>Account Settings</h1>
            <form action="/update-settings" method="POST">

                <!-- Theme Color Section -->
                <div class="setting-section">
                    <h2>Theme Color</h2>
                    <input type="color" id="color-picker" name="theme-color" value="#4e73df">
                    <button type="button" id="apply-color-btn">Test Color</button>
                    <button type="button" id="reset-color-btn">Reset Colors</button>
                </div>

                <!-- Expense Categories Section -->
                <div class="setting-section">
                    <h2 class="section-title">Expense Categories</h2>
                    <table class="table expense-categories-table">
                        <thead>
                            <tr>
                                <th>Icon</th>
                                <th>Category</th>
                                <th>Budget Goal</th>
                                <th>Delete</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="expense-category-row">
                                <td>
                                    <!-- Dropdown for Icon (Emoji) -->
                                    <select name="expenseEmoji" id="expenseEmoji">
                                        <option value="Prize Money">ğŸ¥‡ (1st Place Medal)</option>
                                        <option value="Emergency Fund">ğŸš‘ (Ambulance)</option>
                                        <option value="Child Support">ğŸ‘¶ (Baby)</option>
                                        <option value="Legal Fees">âš–ï¸ (Balance Scale)</option>
                                        <option value="Business Profits">ğŸ“Š (Bar Chart)</option>
                                        <option value="Sports & Recreation">ğŸ€ (Basketball)</option>
                                        <option value="Textbooks & Supplies">ğŸ“š (Books)</option>
                                        <option value="Government Assistance">ğŸ’¼ (Briefcase)</option>
                                        <option value="Home Maintenance">ğŸ§¹ (Broom)</option>
                                        <option value="Transportation">ğŸš— (Car)</option>
                                        <option value="Groceries">ğŸ¥• (Carrot)</option>
                                        <option value="Stocks">ğŸ“‰ (Chart Decreasing)</option>
                                        <option value="Investments">ğŸ“ˆ (Chart Increasing)</option>
                                        <option value="Entertainment">ğŸ¬ (Clapper Board)</option>
                                        <option value="Side Business">ğŸª (Convenience Store)</option>
                                        <option value="Dividends">ğŸ’³ (Credit Card)</option>
                                        <option value="Freelance Work">ğŸ–¥ï¸ (Desktop Computer)</option>
                                        <option value="Pets">ğŸ• (Dog)</option>
                                        <option value="Student Loans">ğŸ’µ (Dollar Banknote)</option>
                                        <option value="Clothing">ğŸ‘— (Dress)</option>
                                        <option value="Royalties">ğŸ“€ (DVD)</option>
                                        <option value="Family Support">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ (Family)</option>
                                        <option value="Gifts">ğŸ (Gift)</option>
                                        <option value="Crowdfunding">ğŸŒ (Globe with Meridians)</option>
                                        <option value="Scholarships">ğŸ“ (Graduation Cap)</option>
                                        <option value="Miscellaneous">ğŸ› ï¸ (Hammer and Wrench)</option>
                                        <option value="Partnership">ğŸ¤ (Handshake)</option>
                                        <option value="Subscriptions">ğŸ§ (Headphone)</option>
                                        <option value="Charity">â¤ï¸ (Heart)</option>
                                        <option value="Inheritance">ğŸ  (House)</option>
                                        <option value="Rental Income">ğŸ˜ï¸ (Houses)</option>
                                        <option value="Utilities">ğŸ’¡ (Light Bulb)</option>
                                        <option value="Commissions">ğŸ’° (Money Bag)</option>
                                        <option value="Cash Gifts">ğŸ’¸ (Money with Wings)</option>
                                        <option value="Pension">ğŸ§“ (Older Person)</option>
                                        <option value="Phone & Internet">ğŸ“± (Phone)</option>
                                        <option value="Health & Insurance">ğŸ’Š (Pill)</option>
                                        <option value="Dining Out">ğŸ½ï¸ (Plate with Cutlery)</option>
                                        <option value="Alimony">ğŸ’ (Ring)</option>
                                        <option value="Medical Expenses">ğŸ©º (Stethoscope)</option>
                                        <option value="Wrench">ğŸ”§ (Wrench)</option>
                                        <option value="Vacation">âœˆï¸ (Airplane)</option>
                                    </select>
                                </td>
                                <td>
                                    <!-- Dropdown for Category Selection -->
                                    <select name="category-name" class="category-select" required>
                                        <option value="Tuition & Fees">Tuition & Fees</option>
                                        <option value="Textbooks & Supplies">Textbooks & Supplies</option>
                                        <option value="Housing">Housing</option>
                                        <option value="Utilities">Utilities</option>
                                        <option value="Groceries">Groceries</option>
                                        <option value="Dining Out">Dining Out</option>
                                        <option value="Transportation">Transportation</option>
                                        <option value="Health & Insurance">Health & Insurance</option>
                                        <option value="Entertainment">Entertainment</option>
                                        <option value="Clothing">Clothing</option>
                                        <option value="Personal Care">Personal Care</option>
                                        <option value="Phone & Internet">Phone & Internet</option>
                                        <option value="Sports & Recreation">Sports & Recreation</option>
                                        <option value="Miscellaneous">Miscellaneous</option>
                                        <option value="Custom">Custom</option> <!-- Custom Option -->
                                    </select>
                                    <input type="text" name="custom-category" class="custom-category-input" placeholder="Enter custom category" style="display: none;">
                                </td>
                                <td>
                                    <!-- Budget Goal Input -->
                                    <div class="budget-goal-container">
                                        <span class="currency-symbol">$</span>
                                        <input type="text" class="budget-goal-input" placeholder="0.00" required>
                                        <span class="per-month-text">per month</span>
                                    </div>
                                </td>
                                <td>
                                    <!-- Delete Button -->
                                    <button type="button" class="delete-category" style="background-color: #c82333;">Delete</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <br>
                    <button type="button" class="add-new-expense-category" style="background-color: var(--theme-color); color: white;">Add New Expense Category</button>
                </div>

                <!-- Income Categories Section -->
                <div class="setting-section">
                    <h2 class="section-title">Income Categories</h2>
                    <table class="table income-categories-table">
                        <thead>
                            <tr>
                                <th>Icon</th>
                                <th>Category</th>
                                <th>Expected Income</th>
                                <th>Delete</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="income-category-row">
                                <td>
                                    <!-- Dropdown for Icon (Emoji) -->
                                    <select name="incomeEmoji" id="incomeEmoji">
                                        <option value="Prize Money">ğŸ¥‡ (1st Place Medal)</option>
                                        <option value="Emergency Fund">ğŸš‘ (Ambulance)</option>
                                        <option value="Child Support">ğŸ‘¶ (Baby)</option>
                                        <option value="Legal Fees">âš–ï¸ (Balance Scale)</option>
                                        <option value="Business Profits">ğŸ“Š (Bar Chart)</option>
                                        <option value="Sports & Recreation">ğŸ€ (Basketball)</option>
                                        <option value="Textbooks & Supplies">ğŸ“š (Books)</option>
                                        <option value="Government Assistance">ğŸ’¼ (Briefcase)</option>
                                        <option value="Home Maintenance">ğŸ§¹ (Broom)</option>
                                        <option value="Transportation">ğŸš— (Car)</option>
                                        <option value="Groceries">ğŸ¥• (Carrot)</option>
                                        <option value="Stocks">ğŸ“‰ (Chart Decreasing)</option>
                                        <option value="Investments">ğŸ“ˆ (Chart Increasing)</option>
                                        <option value="Entertainment">ğŸ¬ (Clapper Board)</option>
                                        <option value="Side Business">ğŸª (Convenience Store)</option>
                                        <option value="Dividends">ğŸ’³ (Credit Card)</option>
                                        <option value="Freelance Work">ğŸ–¥ï¸ (Desktop Computer)</option>
                                        <option value="Pets">ğŸ• (Dog)</option>
                                        <option value="Student Loans">ğŸ’µ (Dollar Banknote)</option>
                                        <option value="Clothing">ğŸ‘— (Dress)</option>
                                        <option value="Royalties">ğŸ“€ (DVD)</option>
                                        <option value="Family Support">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ (Family)</option>
                                        <option value="Gifts">ğŸ (Gift)</option>
                                        <option value="Crowdfunding">ğŸŒ (Globe with Meridians)</option>
                                        <option value="Scholarships">ğŸ“ (Graduation Cap)</option>
                                        <option value="Miscellaneous">ğŸ› ï¸ (Hammer and Wrench)</option>
                                        <option value="Partnership">ğŸ¤ (Handshake)</option>
                                        <option value="Subscriptions">ğŸ§ (Headphone)</option>
                                        <option value="Charity">â¤ï¸ (Heart)</option>
                                        <option value="Inheritance">ğŸ  (House)</option>
                                        <option value="Rental Income">ğŸ˜ï¸ (Houses)</option>
                                        <option value="Utilities">ğŸ’¡ (Light Bulb)</option>
                                        <option value="Commissions">ğŸ’° (Money Bag)</option>
                                        <option value="Cash Gifts">ğŸ’¸ (Money with Wings)</option>
                                        <option value="Pension">ğŸ§“ (Older Person)</option>
                                        <option value="Phone & Internet">ğŸ“± (Phone)</option>
                                        <option value="Health & Insurance">ğŸ’Š (Pill)</option>
                                        <option value="Dining Out">ğŸ½ï¸ (Plate with Cutlery)</option>
                                        <option value="Alimony">ğŸ’ (Ring)</option>
                                        <option value="Medical Expenses">ğŸ©º (Stethoscope)</option>
                                        <option value="Wrench">ğŸ”§ (Wrench)</option>
                                        <option value="Vacation">âœˆï¸ (Airplane)</option>
                                    </select>
                                </td>
                                <td>
                                    <!-- Dropdown for Category Selection -->
                                    <select name="category-name" class="category-select" required>
                                        <option value="Part-Time Job">Paycheck</option>
                                        <option value="Scholarships">Scholarships</option>
                                        <option value="Student Loans">Student Loan Receipt</option>
                                        <option value="Family Support">Family Support</option>
                                        <option value="Grants">Grants</option>
                                        <option value="Gifts">Gifts</option>
                                        <option value="Investments">Investments</option>
                                        <option value="Custom">Custom</option> 
                                        <option value="Custom">Custom</option> <!-- Custom Option -->
                                    </select>
                                    <input type="text" name="custom-category" class="custom-category-input" placeholder="Enter custom category" style="display: none;">
                                </td>
                                <td>
                                    <!-- Budget Goal Input -->
                                    <div class="budget-goal-container">
                                        <span class="currency-symbol">$</span>
                                        <input type="text" class="budget-goal-input" placeholder="0.00" required>
                                        <span class="per-month-text">per month</span>
                                    </div>
                                </td>
                                <td>
                                    <!-- Delete Button -->
                                    <button type="button" class="delete-category" style="background-color: #c82333;">Delete</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <br>
                    <button type="button" class="add-new-income-category" style="background-color: var(--theme-color); color: white;">Add New Income Category</button>
                </div>

                <!-- Save Settings Button -->
                <button type="submit" class="submit-settings" style="background-color: #c82333; color: white;">Save Settings</button>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer" style="background-color: #4e73df; color: white;">
        &copy; 2024 CashCow. All rights reserved.
    </footer>

    <script>
        //Script Section for the settings page, called in settings.ejs file at the very bottom.


        // Get the color picker and buttons
        const colorPicker = document.getElementById("color-picker");
        const applyColorBtn = document.getElementById("apply-color-btn");
        const resetColorBtn = document.getElementById("reset-color-btn");

        // Default color scheme (original theme color)
        const defaultColor = "#4e73df"; // Default blue color
        const defaultHeaderColor = "#3e5bb1"; // Slightly darker shade for header
        const defaultSidebarColor = "#759bec"; // Default sidebar color

        /**
         * Apply selected color theme to the page.
         */
        function applyColor() {
            const selectedColor = colorPicker.value;

            // Update CSS variables for the theme colors
            document.documentElement.style.setProperty('--theme-color', selectedColor);
            document.documentElement.style.setProperty('--header-color', darkenColor(selectedColor, 0.15)); // Darker shade for header
            document.documentElement.style.setProperty('--sidebar-color', selectedColor); // Sidebar matches theme color
        }

        /**
         * Reset the theme colors to the default values.
         */
        function resetColor() {
            // Restore default colors
            document.documentElement.style.setProperty('--theme-color', defaultColor);
            document.documentElement.style.setProperty('--header-color', defaultHeaderColor);
            document.documentElement.style.setProperty('--sidebar-color', defaultSidebarColor);
        }

        /**
         * Helper function to darken a color by a percentage.
         * @param {string} color - The original hex color.
         * @param {number} percent - The percentage to darken the color.
         * @returns {string} The darkened color as a hex string.
         */
        function darkenColor(color, percent) {
            let colorHex = color.startsWith("#") ? color.slice(1) : color; // Remove '#' if present
            let r = parseInt(colorHex.slice(0, 2), 16); // Extract red
            let g = parseInt(colorHex.slice(2, 4), 16); // Extract green
            let b = parseInt(colorHex.slice(4, 6), 16); // Extract blue

            // Adjust each color channel by the darkening percentage
            r = Math.floor(r * (1 - percent));
            g = Math.floor(g * (1 - percent));
            b = Math.floor(b * (1 - percent));

            // Return the darkened color in hex format
            return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
        }

        // Event listeners for the Apply and Reset buttons
        applyColorBtn.addEventListener("click", applyColor); // Apply selected color
        resetColorBtn.addEventListener("click", resetColor); // Reset to default colors

        // Initial load: Apply the default colors
        resetColor();

        /**
         * Show or hide the custom category input field based on the selected option.
         */
        document.querySelectorAll('.category-select').forEach(selectElement => {
            selectElement.addEventListener('change', (event) => {
                const customCategoryInput = event.target.closest('td').querySelector('.custom-category-input');
                // Display custom input if "Custom" is selected; otherwise, hide it
                if (event.target.value === 'Custom') {
                    customCategoryInput.style.display = 'block';
                } else {
                    customCategoryInput.style.display = 'none';
                }
            });
        });

        /**
         * Function to handle the "Custom" category input display logic.
         */
        function handleCategorySelectChange(event) {
            const customCategoryInput = event.target.closest('td').querySelector('.custom-category-input');
            // Display custom input if "Custom" is selected; otherwise, hide it
            if (event.target.value === 'Custom') {
                customCategoryInput.style.display = 'block';
            } else {
                customCategoryInput.style.display = 'none';
            }
        }

        /**
         * Attach the event listener to all current and future select elements.
         */
        function attachCategorySelectListeners() {
            // Attach to existing rows
            document.querySelectorAll('.category-select').forEach(selectElement => {
                selectElement.removeEventListener('change', handleCategorySelectChange); // Remove previous listeners to prevent duplicates
                selectElement.addEventListener('change', handleCategorySelectChange);
            });
        }

        /**
         * Add a new row for an expense category.
         */
        document.querySelector('.add-new-expense-category').addEventListener('click', () => {
            const tableBody = document.querySelector('.expense-categories-table tbody');
            const newRow = document.createElement('tr');
            newRow.classList.add('expense-category-row');
            newRow.innerHTML = `
                <td>
                    <!-- Dropdown for Icon (Emoji) -->
                    <select name="expenseEmoji" id="expenseEmoji">
                        <option value="Prize Money">ğŸ¥‡ (1st Place Medal)</option>
                        <option value="Emergency Fund">ğŸš‘ (Ambulance)</option>
                        <option value="Child Support">ğŸ‘¶ (Baby)</option>
                        <option value="Legal Fees">âš–ï¸ (Balance Scale)</option>
                        <option value="Business Profits">ğŸ“Š (Bar Chart)</option>
                        <option value="Sports & Recreation">ğŸ€ (Basketball)</option>
                        <option value="Textbooks & Supplies">ğŸ“š (Books)</option>
                        <option value="Government Assistance">ğŸ’¼ (Briefcase)</option>
                        <option value="Home Maintenance">ğŸ§¹ (Broom)</option>
                        <option value="Transportation">ğŸš— (Car)</option>
                        <option value="Groceries">ğŸ¥• (Carrot)</option>
                        <option value="Stocks">ğŸ“‰ (Chart Decreasing)</option>
                        <option value="Investments">ğŸ“ˆ (Chart Increasing)</option>
                        <option value="Entertainment">ğŸ¬ (Clapper Board)</option>
                        <option value="Side Business">ğŸª (Convenience Store)</option>
                        <option value="Dividends">ğŸ’³ (Credit Card)</option>
                        <option value="Freelance Work">ğŸ–¥ï¸ (Desktop Computer)</option>
                        <option value="Pets">ğŸ• (Dog)</option>
                        <option value="Student Loans">ğŸ’µ (Dollar Banknote)</option>
                        <option value="Clothing">ğŸ‘— (Dress)</option>
                        <option value="Royalties">ğŸ“€ (DVD)</option>
                        <option value="Family Support">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ (Family)</option>
                        <option value="Gifts">ğŸ (Gift)</option>
                        <option value="Crowdfunding">ğŸŒ (Globe with Meridians)</option>
                        <option value="Scholarships">ğŸ“ (Graduation Cap)</option>
                        <option value="Miscellaneous">ğŸ› ï¸ (Hammer and Wrench)</option>
                        <option value="Partnership">ğŸ¤ (Handshake)</option>
                        <option value="Subscriptions">ğŸ§ (Headphone)</option>
                        <option value="Charity">â¤ï¸ (Heart)</option>
                        <option value="Inheritance">ğŸ  (House)</option>
                        <option value="Rental Income">ğŸ˜ï¸ (Houses)</option>
                        <option value="Utilities">ğŸ’¡ (Light Bulb)</option>
                        <option value="Commissions">ğŸ’° (Money Bag)</option>
                        <option value="Cash Gifts">ğŸ’¸ (Money with Wings)</option>
                        <option value="Pension">ğŸ§“ (Older Person)</option>
                        <option value="Phone & Internet">ğŸ“± (Phone)</option>
                        <option value="Health & Insurance">ğŸ’Š (Pill)</option>
                        <option value="Dining Out">ğŸ½ï¸ (Plate with Cutlery)</option>
                        <option value="Alimony">ğŸ’ (Ring)</option>
                        <option value="Medical Expenses">ğŸ©º (Stethoscope)</option>
                        <option value="Wrench">ğŸ”§ (Wrench)</option>
                        <option value="Vacation">âœˆï¸ (Airplane)</option>
                    </select>
                </td>
                <td>
                    <select name="category-name" class="category-select" required>
                        <option value="Tuition & Fees">Tuition & Fees</option>
                        <option value="Textbooks & Supplies">Textbooks & Supplies</option>
                        <option value="Housing">Housing</option>
                        <option value="Utilities">Utilities</option>
                        <option value="Groceries">Groceries</option>
                        <option value="Dining Out">Dining Out</option>
                        <option value="Transportation">Transportation</option>
                        <option value="Health & Insurance">Health & Insurance</option>
                        <option value="Entertainment">Entertainment</option>
                        <option value="Clothing">Clothing</option>
                        <option value="Personal Care">Personal Care</option>
                        <option value="Phone & Internet">Phone & Internet</option>
                        <option value="Sports & Recreation">Sports & Recreation</option>
                        <option value="Miscellaneous">Miscellaneous</option>
                        <option value="Custom">Custom</option>
                    </select>
                    <input type="text" name="custom-category" class="custom-category-input" placeholder="Enter custom category" style="display: none;">
                </td>
                <td>
                    <div class="budget-goal-container">
                        <span class="currency-symbol">$</span>
                        <input type="text" class="budget-goal-input" placeholder="0.00" required>
                        <span class="per-month-text">per month</span>
                    </div>
                </td>
                <td>
                    <button type="button" class="delete-category" style="background-color: #c82333;">Delete</button>
                </td>
            `;
            tableBody.appendChild(newRow);

            // Reattach listeners to include the new row
            attachCategorySelectListeners();
        });

        /**
         * Add a new row for an income category.
         */
        document.querySelector('.add-new-income-category').addEventListener('click', () => {
            const tableBody = document.querySelector('.income-categories-table tbody');
            const newRow = document.createElement('tr');
            newRow.classList.add('income-category-row');
            newRow.innerHTML = `
                <td>
                    <!-- Dropdown for Icon (Emoji) -->
                    <select name="incomeEmoji" id="incomeEmoji">
                        <option value="Prize Money">ğŸ¥‡ (1st Place Medal)</option>
                        <option value="Emergency Fund">ğŸš‘ (Ambulance)</option>
                        <option value="Child Support">ğŸ‘¶ (Baby)</option>
                        <option value="Legal Fees">âš–ï¸ (Balance Scale)</option>
                        <option value="Business Profits">ğŸ“Š (Bar Chart)</option>
                        <option value="Sports & Recreation">ğŸ€ (Basketball)</option>
                        <option value="Textbooks & Supplies">ğŸ“š (Books)</option>
                        <option value="Government Assistance">ğŸ’¼ (Briefcase)</option>
                        <option value="Home Maintenance">ğŸ§¹ (Broom)</option>
                        <option value="Transportation">ğŸš— (Car)</option>
                        <option value="Groceries">ğŸ¥• (Carrot)</option>
                        <option value="Stocks">ğŸ“‰ (Chart Decreasing)</option>
                        <option value="Investments">ğŸ“ˆ (Chart Increasing)</option>
                        <option value="Entertainment">ğŸ¬ (Clapper Board)</option>
                        <option value="Side Business">ğŸª (Convenience Store)</option>
                        <option value="Dividends">ğŸ’³ (Credit Card)</option>
                        <option value="Freelance Work">ğŸ–¥ï¸ (Desktop Computer)</option>
                        <option value="Pets">ğŸ• (Dog)</option>
                        <option value="Student Loans">ğŸ’µ (Dollar Banknote)</option>
                        <option value="Clothing">ğŸ‘— (Dress)</option>
                        <option value="Royalties">ğŸ“€ (DVD)</option>
                        <option value="Family Support">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ (Family)</option>
                        <option value="Gifts">ğŸ (Gift)</option>
                        <option value="Crowdfunding">ğŸŒ (Globe with Meridians)</option>
                        <option value="Scholarships">ğŸ“ (Graduation Cap)</option>
                        <option value="Miscellaneous">ğŸ› ï¸ (Hammer and Wrench)</option>
                        <option value="Partnership">ğŸ¤ (Handshake)</option>
                        <option value="Subscriptions">ğŸ§ (Headphone)</option>
                        <option value="Charity">â¤ï¸ (Heart)</option>
                        <option value="Inheritance">ğŸ  (House)</option>
                        <option value="Rental Income">ğŸ˜ï¸ (Houses)</option>
                        <option value="Utilities">ğŸ’¡ (Light Bulb)</option>
                        <option value="Commissions">ğŸ’° (Money Bag)</option>
                        <option value="Cash Gifts">ğŸ’¸ (Money with Wings)</option>
                        <option value="Pension">ğŸ§“ (Older Person)</option>
                        <option value="Phone & Internet">ğŸ“± (Phone)</option>
                        <option value="Health & Insurance">ğŸ’Š (Pill)</option>
                        <option value="Dining Out">ğŸ½ï¸ (Plate with Cutlery)</option>
                        <option value="Alimony">ğŸ’ (Ring)</option>
                        <option value="Medical Expenses">ğŸ©º (Stethoscope)</option>
                        <option value="Wrench">ğŸ”§ (Wrench)</option>
                        <option value="Vacation">âœˆï¸ (Airplane)</option>
                    </select>
                </td>
                <td>
                    <select name="category-name" class="category-select" required>
                        <option value="Part-Time Job">Paycheck</option>
                        <option value="Scholarships">Scholarships</option>
                        <option value="Student Loans">Student Loan Receipt</option>
                        <option value="Family Support">Family Support</option>
                        <option value="Grants">Grants</option>
                        <option value="Gifts">Gifts</option>
                        <option value="Investments">Investments</option>
                        <option value="Custom">Custom</option> 
                        <option value="Custom">Custom</option> <!-- Custom Option -->
                    </select>
                    <input type="text" name="custom-category" class="custom-category-input" placeholder="Enter custom category" style="display: none;">
                </td>
                <td>
                    <div class="budget-goal-container">
                        <span class="currency-symbol">$</span>
                        <input type="text" class="budget-goal-input" placeholder="0.00" required>
                        <span class="per-month-text">per month</span>
                    </div>
                </td>
                <td>
                    <button type="button" class="delete-category" style="background-color: #c82333;">Delete</button>
                </td>
            `;
            tableBody.appendChild(newRow);

            // Reattach listeners to include the new row
            attachCategorySelectListeners();
        });

        /**
         * Delete a row (for both expense and income categories).
         */
        document.addEventListener('click', (event) => {
            if (event.target.classList.contains('delete-category')) {
                const row = event.target.closest('tr'); // Find the closest row to the delete button
                row.remove(); // Remove the row from the table
            }
        });

    </script>
</body>
</html>

