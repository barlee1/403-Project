<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta Information -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings Page</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">

    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Navbar -->
    <%- include("partials/navbar") %>

    <%= userId %>
    <!-- Main Content Wrapper -->
    <div class="content-wrapper">
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <a href="/home" class="nav-link">Home</a>
            <a href="/expenses" class="nav-link">Expenses</a>
            <a href="/helpfultips" class="nav-link">Helpful Tips</a>
            <a href="/settings" class="nav-link active">Settings</a>
            <a href="/profile" class="nav-link">Profile</a>
        </div>

        <!-- Main Content Area -->

        <div class="main-content">
            <h1>Account Settings</h1>
            <form action="/update-color" method="POST">
                <!-- Theme Color Section -->
                <div class="setting-section">
                    <h2>Theme Color</h2>
                    <!-- Color Picker Input -->
                    <input type="color" id="color-picker" name="selectedColor" value="<%= themeColor %>">
                    <br><br>
                                                            
                    <!-- Buttons for Actions -->
                <div class="setting-section-buttons">
                    <button type="button" id="apply-color-btn">Test Color</button>
                    <button type="button" id="reset-color-btn">Reset Color To Default</button>
                    <button type="submit" class="submit-settings" style="background-color: #c82333; color: white;">Save Changes</button>
                </div>
                </div>
                <!-- Save Settings Button -->
            </form>

                <!-- Expense Categories Section -->
                <div class="setting-section">
                    <h2 class="section-title">Expense Categories</h2>
                    <table class="table expense-categories-table">
                        <thead>
                            <tr>
                                <th>Icon</th>
                                <th>Category</th>
                                <th>Budget Goal</th>
                                <th>Edit/Save</th>
                                <th>Delete</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% if (typeXCategories.length > 0) { %>
                                <% typeXCategories.forEach(category => { %>
                                    <tr>
                                        <td style="display: none;"><%= category.categoryid %></td>
                                        <td><%= category.icon %></td>
                                        <td><%= category.categoryname %></td>
                                        <td><%= category.budget%> per month</td>
                                        <td>
                                            <!-- Edit -->
                                            <button type="button" class="edit-category" onclick="toggleEditForm('<%= category.categoryid %>')" style="background-color: var(--theme-color); color: white;">Edit</button>
                                        </td>
                                        <td>
                                            <!-- Delete Button Form -->
                                            <form action="/delete-category" method="POST" style="display: inline;" class="delete-category">
                                                <input type="hidden" name="categoryid" value="<%= category.categoryid %>">
                                                <button type="submit" class="delete-category" style="background-color: #c82333;">Delete</button>
                                            </form>
                                        </td>
                                            <tr id="editForm-<%= category.categoryid %>" class="hidden">
                                                <form action="/edit-category" method="POST">
                                                    <input type="hidden" name="categoryid" value="<%= category.categoryid %>">
                                                    <td>
                                                        <!-- Dropdown for Icon (Emoji) -->
                                                        <select name="icon" id="icon" required>
                                                            <option value="ğŸ¥‡" <%= category.icon === 'ğŸ¥‡' ? 'selected' : '' %>>ğŸ¥‡ (1st Place Medal)</option>
                                                            <option value="ğŸš‘" <%= category.icon === 'ğŸš‘' ? 'selected' : '' %>>ğŸš‘ (Ambulance)</option>
                                                            <option value="ğŸ‘¶" <%= category.icon === 'ğŸ‘¶' ? 'selected' : '' %>>ğŸ‘¶ (Baby)</option>
                                                            <option value="âš–ï¸" <%= category.icon === 'âš–ï¸' ? 'selected' : '' %>>âš–ï¸ (Balance Scale)</option>
                                                            <option value="ğŸ“Š" <%= category.icon === 'ğŸ“Š' ? 'selected' : '' %>>ğŸ“Š (Bar Chart)</option>
                                                            <option value="ğŸ€" <%= category.icon === 'ğŸ€' ? 'selected' : '' %>>ğŸ€ (Basketball)</option>
                                                            <option value="ğŸ“š" <%= category.icon === 'ğŸ“š' ? 'selected' : '' %>>ğŸ“š (Books)</option>
                                                            <option value="ğŸ’¼" <%= category.icon === 'ğŸ’¼' ? 'selected' : '' %>>ğŸ’¼ (Briefcase)</option>
                                                            <option value="ğŸ§¹" <%= category.icon === 'ğŸ§¹' ? 'selected' : '' %>>ğŸ§¹ (Broom)</option>
                                                            <option value="ğŸš—" <%= category.icon === 'ğŸš—' ? 'selected' : '' %>>ğŸš— (Car)</option>
                                                            <option value="ğŸ¥•" <%= category.icon === 'ğŸ¥•' ? 'selected' : '' %>>ğŸ¥• (Carrot)</option>
                                                            <option value="ğŸ“‰" <%= category.icon === 'ğŸ“‰' ? 'selected' : '' %>>ğŸ“‰ (Chart Decreasing)</option>
                                                            <option value="ğŸ“ˆ" <%= category.icon === 'ğŸ“ˆ' ? 'selected' : '' %>>ğŸ“ˆ (Chart Increasing)</option>
                                                            <option value="ğŸ¬" <%= category.icon === 'ğŸ¬' ? 'selected' : '' %>>ğŸ¬ (Clapper Board)</option>
                                                            <option value="ğŸª" <%= category.icon === 'ğŸª' ? 'selected' : '' %>>ğŸª (Convenience Store)</option>
                                                            <option value="ğŸ’³" <%= category.icon === 'ğŸ’³' ? 'selected' : '' %>>ğŸ’³ (Credit Card)</option>
                                                            <option value="ğŸ–¥ï¸" <%= category.icon === 'ğŸ–¥ï¸' ? 'selected' : '' %>>ğŸ–¥ï¸ (Desktop Computer)</option>
                                                            <option value="ğŸ•" <%= category.icon === 'ğŸ•' ? 'selected' : '' %>>ğŸ• (Dog)</option>
                                                            <option value="ğŸ’µ" <%= category.icon === 'ğŸ’µ' ? 'selected' : '' %>>ğŸ’µ (Dollar Banknote)</option>
                                                            <option value="ğŸ‘—" <%= category.icon === 'ğŸ‘—' ? 'selected' : '' %>>ğŸ‘— (Dress)</option>
                                                            <option value="ğŸ“€" <%= category.icon === 'ğŸ“€' ? 'selected' : '' %>>ğŸ“€ (DVD)</option>
                                                            <option value="ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦" <%= category.icon === 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦' ? 'selected' : '' %>>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ (Family)</option>
                                                            <option value="ğŸ" <%= category.icon === 'ğŸ' ? 'selected' : '' %>>ğŸ (Gift)</option>
                                                            <option value="ğŸŒ" <%= category.icon === 'ğŸŒ' ? 'selected' : '' %>>ğŸŒ (Globe with Meridians)</option>
                                                            <option value="ğŸ“" <%= category.icon === 'ğŸ“' ? 'selected' : '' %>>ğŸ“ (Graduation Cap)</option>
                                                            <option value="ğŸ› ï¸" <%= category.icon === 'ğŸ› ï¸' ? 'selected' : '' %>>ğŸ› ï¸ (Hammer and Wrench)</option>
                                                            <option value="ğŸ¤" <%= category.icon === 'ğŸ¤' ? 'selected' : '' %>>ğŸ¤ (Handshake)</option>
                                                            <option value="ğŸ§" <%= category.icon === 'ğŸ§' ? 'selected' : '' %>>ğŸ§ (Headphone)</option>
                                                            <option value="â¤ï¸" <%= category.icon === 'â¤ï¸' ? 'selected' : '' %>>â¤ï¸ (Heart)</option>
                                                            <option value="ğŸ " <%= category.icon === 'ğŸ ' ? 'selected' : '' %>>ğŸ  (House)</option>
                                                            <option value="ğŸ˜ï¸" <%= category.icon === 'ğŸ˜ï¸' ? 'selected' : '' %>>ğŸ˜ï¸ (Houses)</option>
                                                            <option value="ğŸ’¡" <%= category.icon === 'ğŸ’¡' ? 'selected' : '' %>>ğŸ’¡ (Light Bulb)</option>
                                                            <option value="ğŸ’°" <%= category.icon === 'ğŸ’°' ? 'selected' : '' %>>ğŸ’° (Money Bag)</option>
                                                            <option value="ğŸ’¸" <%= category.icon === 'ğŸ’¸' ? 'selected' : '' %>>ğŸ’¸ (Money with Wings)</option>
                                                            <option value="ğŸ§“" <%= category.icon === 'ğŸ§“' ? 'selected' : '' %>>ğŸ§“ (Older Person)</option>
                                                            <option value="ğŸ“±" <%= category.icon === 'ğŸ“±' ? 'selected' : '' %>>ğŸ“± (Phone)</option>
                                                            <option value="ğŸ’Š" <%= category.icon === 'ğŸ’Š' ? 'selected' : '' %>>ğŸ’Š (Pill)</option>
                                                            <option value="ğŸ½ï¸" <%= category.icon === 'ğŸ½ï¸' ? 'selected' : '' %>>ğŸ½ï¸ (Plate with Cutlery)</option>
                                                            <option value="ğŸ’" <%= category.icon === 'ğŸ’' ? 'selected' : '' %>>ğŸ’ (Ring)</option>
                                                            <option value="ğŸ©º" <%= category.icon === 'ğŸ©º' ? 'selected' : '' %>>ğŸ©º (Stethoscope)</option>
                                                            <option value="ğŸ”§" <%= category.icon === 'ğŸ”§' ? 'selected' : '' %>>ğŸ”§ (Wrench)</option>
                                                            <option value="âœˆï¸" <%= category.icon === 'âœˆï¸' ? 'selected' : '' %>>âœˆï¸ (Airplane)</option>
                                                        </select>
                                                    </td>
                                                    
                                                    <td>
                                                        <!-- Dropdown for Category Selection -->
                                                        <select name="categoryname" id= "categoryname" class="category-select" required>
                                                            <option value="Tuition & Fees" <%= category.categoryname === 'Tuition & Fees' ? 'selected' : '' %>>Tuition & Fees</option>
                                                            <option value="Textbooks & Supplies" <%= category.categoryname === 'Textbooks & Supplies' ? 'selected' : '' %>>Textbooks & Supplies</option>
                                                            <option value="Housing" <%= category.categoryname === 'Housing' ? 'selected' : '' %>>Housing</option>
                                                            <option value="Utilities" <%= category.categoryname === 'Utilities' ? 'selected' : '' %>>Utilities</option>
                                                            <option value="Groceries" <%= category.categoryname === 'Groceries' ? 'selected' : '' %>>Groceries</option>
                                                            <option value="Dining Out" <%= category.categoryname === 'Dining Out' ? 'selected' : '' %>>Dining Out</option>
                                                            <option value="Transportation" <%= category.categoryname === 'Transportation' ? 'selected' : '' %>>Transportation</option>
                                                            <option value="Health & Insurance" <%= category.categoryname === 'Health & Insurance' ? 'selected' : '' %>>Health & Insurance</option>
                                                            <option value="Entertainment" <%= category.categoryname === 'Entertainment' ? 'selected' : '' %>>Entertainment</option>
                                                            <option value="Clothing" <%= category.categoryname === 'Clothing' ? 'selected' : '' %>>Clothing</option>
                                                            <option value="Personal Care" <%= category.categoryname === 'Personal Care' ? 'selected' : '' %>>Personal Care</option>
                                                            <option value="Phone & Internet" <%= category.categoryname === 'Phone & Internet' ? 'selected' : '' %>>Phone & Internet</option>
                                                            <option value="Sports & Recreation" <%= category.categoryname === 'Sports & Recreation' ? 'selected' : '' %>>Sports & Recreation</option>
                                                            <option value="Miscellaneous" <%= category.categoryname === 'Miscellaneous' ? 'selected' : '' %>>Miscellaneous</option>
                                                        </select>
                                                    </td>
                                                    
                                                    <td>
                                                        <div class="budget-goal-container">
                                                            <span class="currency-symbol">$</span>
                                                            <input type="number" class="budget" id="budget" value="<%= category.budget %>" name="budget" placeholder="<%= category.budget %>" step="0.01" required>
                                                            <span class="per-month-text">per month</span>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <button type="submit" class="Save-category" style="background-color: var(--theme-color); color: white;">Save</button>
                                                    </td>
                                                    <td>
                                                        <!-- Edit -->
                                                        <button type="button" class="delete-category" style="background-color: #c82333;" onclick="toggleEditForm('<%= category.categoryid %>')">
                                                            Cancel
                                                        </button>                                        
                                                    </td>
                                                    
                                                </form>
                                            </div>
                                        </tr>
                                    </tr>
                                <% }); %>
                            <% } else { %>
                                <tr>
                                    <td colspan="5" style="text-align: center;">No expense categories available.</td>
                                </tr>
                            <% } %>
                            <form action="/save-category" method="POST" class="category-form">
                            <tr class="expense-category-row">
                                <td>
                                    <!-- Dropdown for Icon (Emoji) -->
                                    <select name="icon" id="icon" required>
                                        <option value="ğŸ¥‡">ğŸ¥‡ (1st Place Medal)</option>
                                        <option value="ğŸš‘">ğŸš‘ (Ambulance)</option>
                                        <option value="ğŸ‘¶">ğŸ‘¶ (Baby)</option>
                                        <option value="âš–ï¸">âš–ï¸ (Balance Scale)</option>
                                        <option value="ğŸ“Š">ğŸ“Š (Bar Chart)</option>
                                        <option value="ğŸ€">ğŸ€ (Basketball)</option>
                                        <option value="ğŸ“š">ğŸ“š (Books)</option>
                                        <option value="ğŸ’¼">ğŸ’¼ (Briefcase)</option>
                                        <option value="ğŸ§¹">ğŸ§¹ (Broom)</option>
                                        <option value="ğŸš—">ğŸš— (Car)</option>
                                        <option value="ğŸ¥•">ğŸ¥• (Carrot)</option>
                                        <option value="ğŸ“‰">ğŸ“‰ (Chart Decreasing)</option>
                                        <option value="ğŸ“ˆ">ğŸ“ˆ (Chart Increasing)</option>
                                        <option value="ğŸ¬">ğŸ¬ (Clapper Board)</option>
                                        <option value="ğŸª">ğŸª (Convenience Store)</option>
                                        <option value="ğŸ’³">ğŸ’³ (Credit Card)</option>
                                        <option value="ğŸ–¥ï¸">ğŸ–¥ï¸ (Desktop Computer)</option>
                                        <option value="ğŸ•">ğŸ• (Dog)</option>
                                        <option value="ğŸ’µ">ğŸ’µ (Dollar Banknote)</option>
                                        <option value="ğŸ‘—">ğŸ‘— (Dress)</option>
                                        <option value="ğŸ“€">ğŸ“€ (DVD)</option>
                                        <option value="ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ (Family)</option>
                                        <option value="ğŸ">ğŸ (Gift)</option>
                                        <option value="ğŸŒ">ğŸŒ (Globe with Meridians)</option>
                                        <option value="ğŸ“">ğŸ“ (Graduation Cap)</option>
                                        <option value="ğŸ› ï¸">ğŸ› ï¸ (Hammer and Wrench)</option>
                                        <option value="ğŸ¤">ğŸ¤ (Handshake)</option>
                                        <option value="ğŸ§">ğŸ§ (Headphone)</option>
                                        <option value="â¤ï¸">â¤ï¸ (Heart)</option>
                                        <option value="ğŸ ">ğŸ  (House)</option>
                                        <option value="ğŸ˜ï¸">ğŸ˜ï¸ (Houses)</option>
                                        <option value="ğŸ’¡">ğŸ’¡ (Light Bulb)</option>
                                        <option value="ğŸ’°">ğŸ’° (Money Bag)</option>
                                        <option value="ğŸ’¸">ğŸ’¸ (Money with Wings)</option>
                                        <option value="ğŸ§“">ğŸ§“ (Older Person)</option>
                                        <option value="ğŸ“±">ğŸ“± (Phone)</option>
                                        <option value="ğŸ’Š">ğŸ’Š (Pill)</option>
                                        <option value="ğŸ½ï¸">ğŸ½ï¸ (Plate with Cutlery)</option>
                                        <option value="ğŸ’">ğŸ’ (Ring)</option>
                                        <option value="ğŸ©º">ğŸ©º (Stethoscope)</option>
                                        <option value="ğŸ”§">ğŸ”§ (Wrench)</option>
                                        <option value="âœˆï¸">âœˆï¸ (Airplane)</option>
                                    </select>
                                </td>
                                <td>
                                    <!-- Dropdown for Category Selection -->
                                    <select name="categoryname" id= "categoryname" class="category-select" required>
                                        <option value="Tuition & Fees">Tuition & Fees</option>
                                        <option value="Textbooks & Supplies">Textbooks & Supplies</option>
                                        <option value="Housing">Housing</option>
                                        <option value="Utilities">Utilities</option>
                                        <option value="Groceries">Groceries</option>
                                        <option value="Dining Out">Dining Out</option>
                                        <option value="Transportation">Transportation</option>
                                        <option value="Health & Insurance">Health & Insurance</option>
                                        <option value="Entertainment">Entertainment</option>
                                        <option value="Clothing">Clothing</option>
                                        <option value="Personal Care">Personal Care</option>
                                        <option value="Phone & Internet">Phone & Internet</option>
                                        <option value="Sports & Recreation">Sports & Recreation</option>
                                        <option value="Miscellaneous">Miscellaneous</option>
                                    </select>
                                </td>
                                <td>
                                    <!-- Budget Goal Input -->
                                    <div class="budget-goal-container">
                                        <span class="currency-symbol">$</span>
                                        <input type="number" class="budget" id="budget" name="budget" placeholder="0.00" step="0.01" required>
                                        <span class="per-month-text">per month</span>
                                    </div>
                                </td>
                                <td>
                                    <!-- Save Button -->
                                    <button type="submit" class="save-category" style="background-color: var(--theme-color); color: white;">Save</button>
                                </td>
                                <td>
                                    <!-- Delete Button Form -->
                                    <button type="submit" class="delete-empty-category" style="background-color: #c82333;">Delete</button>
                                </td>
                                <td>
                                    <input type="hidden" name="type" value="X">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <br>
                </form>
                    <button type="button" class="add-new-expense-category" style="background-color: var(--theme-color); color: white;">Add New Expense Category</button>
                </div>

                <!-- Income Categories Section -->
                <div class="setting-section">
                    <h2 class="section-title">Income Categories</h2>
                    <table class="table income-categories-table">
                        <thead>
                            <tr>
                                <th>Icon</th>
                                <th>Category</th>
                                <th>Budget Goal</th>
                                <th>Edit/Save</th>
                                <th>Delete</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% if (typeICategories.length > 0) { %>
                                <% typeICategories.forEach(category => { %>
                                    <tr>
                                        <td style="display: none;"><%= category.categoryid %></td>
                                        <td><%= category.icon %></td>
                                        <td><%= category.categoryname %></td>
                                        <td><%= category.budget%> per month</td>
                                        <td>
                                            <!-- Edit -->
                                            <button type="button" class="edit-category" onclick="toggleEditForm('<%= category.categoryid %>')" style="background-color: var(--theme-color); color: white;">
                                                Edit
                                            </button>                                        
                                        </td>
                                        <td>
                                            <!-- Delete Button Form -->
                                            <form action="/delete-category" method="POST" style="display: inline;" class="delete-category">
                                                <input type="hidden" name="categoryid" value="<%= category.categoryid %>">
                                                <button type="submit" class="delete-category" style="background-color: #c82333;">Delete</button>
                                            </form>
                                        </td>
                                        <tr id="editForm-<%= category.categoryid %>" class="hidden">
                                                <form action="/edit-category" method="POST">
                                                    <input type="hidden" name="categoryid" value="<%= category.categoryid %>">
                                                    <td>
                                                        <!-- Dropdown for Icon (Emoji) -->
                                                        <select name="icon" id="icon" required>
                                                            <option value="ğŸ¥‡" <%= category.icon === 'ğŸ¥‡' ? 'selected' : '' %>>ğŸ¥‡ (1st Place Medal)</option>
                                                            <option value="ğŸš‘" <%= category.icon === 'ğŸš‘' ? 'selected' : '' %>>ğŸš‘ (Ambulance)</option>
                                                            <option value="ğŸ‘¶" <%= category.icon === 'ğŸ‘¶' ? 'selected' : '' %>>ğŸ‘¶ (Baby)</option>
                                                            <option value="âš–ï¸" <%= category.icon === 'âš–ï¸' ? 'selected' : '' %>>âš–ï¸ (Balance Scale)</option>
                                                            <option value="ğŸ“Š" <%= category.icon === 'ğŸ“Š' ? 'selected' : '' %>>ğŸ“Š (Bar Chart)</option>
                                                            <option value="ğŸ€" <%= category.icon === 'ğŸ€' ? 'selected' : '' %>>ğŸ€ (Basketball)</option>
                                                            <option value="ğŸ“š" <%= category.icon === 'ğŸ“š' ? 'selected' : '' %>>ğŸ“š (Books)</option>
                                                            <option value="ğŸ’¼" <%= category.icon === 'ğŸ’¼' ? 'selected' : '' %>>ğŸ’¼ (Briefcase)</option>
                                                            <option value="ğŸ§¹" <%= category.icon === 'ğŸ§¹' ? 'selected' : '' %>>ğŸ§¹ (Broom)</option>
                                                            <option value="ğŸš—" <%= category.icon === 'ğŸš—' ? 'selected' : '' %>>ğŸš— (Car)</option>
                                                            <option value="ğŸ¥•" <%= category.icon === 'ğŸ¥•' ? 'selected' : '' %>>ğŸ¥• (Carrot)</option>
                                                            <option value="ğŸ“‰" <%= category.icon === 'ğŸ“‰' ? 'selected' : '' %>>ğŸ“‰ (Chart Decreasing)</option>
                                                            <option value="ğŸ“ˆ" <%= category.icon === 'ğŸ“ˆ' ? 'selected' : '' %>>ğŸ“ˆ (Chart Increasing)</option>
                                                            <option value="ğŸ¬" <%= category.icon === 'ğŸ¬' ? 'selected' : '' %>>ğŸ¬ (Clapper Board)</option>
                                                            <option value="ğŸª" <%= category.icon === 'ğŸª' ? 'selected' : '' %>>ğŸª (Convenience Store)</option>
                                                            <option value="ğŸ’³" <%= category.icon === 'ğŸ’³' ? 'selected' : '' %>>ğŸ’³ (Credit Card)</option>
                                                            <option value="ğŸ–¥ï¸" <%= category.icon === 'ğŸ–¥ï¸' ? 'selected' : '' %>>ğŸ–¥ï¸ (Desktop Computer)</option>
                                                            <option value="ğŸ•" <%= category.icon === 'ğŸ•' ? 'selected' : '' %>>ğŸ• (Dog)</option>
                                                            <option value="ğŸ’µ" <%= category.icon === 'ğŸ’µ' ? 'selected' : '' %>>ğŸ’µ (Dollar Banknote)</option>
                                                            <option value="ğŸ‘—" <%= category.icon === 'ğŸ‘—' ? 'selected' : '' %>>ğŸ‘— (Dress)</option>
                                                            <option value="ğŸ“€" <%= category.icon === 'ğŸ“€' ? 'selected' : '' %>>ğŸ“€ (DVD)</option>
                                                            <option value="ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦" <%= category.icon === 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦' ? 'selected' : '' %>>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ (Family)</option>
                                                            <option value="ğŸ" <%= category.icon === 'ğŸ' ? 'selected' : '' %>>ğŸ (Gift)</option>
                                                            <option value="ğŸŒ" <%= category.icon === 'ğŸŒ' ? 'selected' : '' %>>ğŸŒ (Globe with Meridians)</option>
                                                            <option value="ğŸ“" <%= category.icon === 'ğŸ“' ? 'selected' : '' %>>ğŸ“ (Graduation Cap)</option>
                                                            <option value="ğŸ› ï¸" <%= category.icon === 'ğŸ› ï¸' ? 'selected' : '' %>>ğŸ› ï¸ (Hammer and Wrench)</option>
                                                            <option value="ğŸ¤" <%= category.icon === 'ğŸ¤' ? 'selected' : '' %>>ğŸ¤ (Handshake)</option>
                                                            <option value="ğŸ§" <%= category.icon === 'ğŸ§' ? 'selected' : '' %>>ğŸ§ (Headphone)</option>
                                                            <option value="â¤ï¸" <%= category.icon === 'â¤ï¸' ? 'selected' : '' %>>â¤ï¸ (Heart)</option>
                                                            <option value="ğŸ " <%= category.icon === 'ğŸ ' ? 'selected' : '' %>>ğŸ  (House)</option>
                                                            <option value="ğŸ˜ï¸" <%= category.icon === 'ğŸ˜ï¸' ? 'selected' : '' %>>ğŸ˜ï¸ (Houses)</option>
                                                            <option value="ğŸ’¡" <%= category.icon === 'ğŸ’¡' ? 'selected' : '' %>>ğŸ’¡ (Light Bulb)</option>
                                                            <option value="ğŸ’°" <%= category.icon === 'ğŸ’°' ? 'selected' : '' %>>ğŸ’° (Money Bag)</option>
                                                            <option value="ğŸ’¸" <%= category.icon === 'ğŸ’¸' ? 'selected' : '' %>>ğŸ’¸ (Money with Wings)</option>
                                                            <option value="ğŸ§“" <%= category.icon === 'ğŸ§“' ? 'selected' : '' %>>ğŸ§“ (Older Person)</option>
                                                            <option value="ğŸ“±" <%= category.icon === 'ğŸ“±' ? 'selected' : '' %>>ğŸ“± (Phone)</option>
                                                            <option value="ğŸ’Š" <%= category.icon === 'ğŸ’Š' ? 'selected' : '' %>>ğŸ’Š (Pill)</option>
                                                            <option value="ğŸ½ï¸" <%= category.icon === 'ğŸ½ï¸' ? 'selected' : '' %>>ğŸ½ï¸ (Plate with Cutlery)</option>
                                                            <option value="ğŸ’" <%= category.icon === 'ğŸ’' ? 'selected' : '' %>>ğŸ’ (Ring)</option>
                                                            <option value="ğŸ©º" <%= category.icon === 'ğŸ©º' ? 'selected' : '' %>>ğŸ©º (Stethoscope)</option>
                                                            <option value="ğŸ”§" <%= category.icon === 'ğŸ”§' ? 'selected' : '' %>>ğŸ”§ (Wrench)</option>
                                                            <option value="âœˆï¸" <%= category.icon === 'âœˆï¸' ? 'selected' : '' %>>âœˆï¸ (Airplane)</option>
                                                        </select>
                                                    </td>
                                                    
                                                    <td>
                                                        <!-- Dropdown for Category Selection -->
                                                        <select name="categoryname" id="categoryname" class="category-select" required>
                                                            <option value="Paycheck" <%= category.categoryname === 'Paycheck' ? 'selected' : '' %>>Paycheck</option>
                                                            <option value="Scholarships" <%= category.categoryname === 'Scholarships' ? 'selected' : '' %>>Scholarships</option>
                                                            <option value="Student Loan Receipt" <%= category.categoryname === 'Student Loan Receipt' ? 'selected' : '' %>>Student Loan Receipt</option>
                                                            <option value="Family Support" <%= category.categoryname === 'Family Support' ? 'selected' : '' %>>Family Support</option>
                                                            <option value="Grants" <%= category.categoryname === 'Grants' ? 'selected' : '' %>>Grants</option>
                                                            <option value="Gifts" <%= category.categoryname === 'Gifts' ? 'selected' : '' %>>Gifts</option>
                                                            <option value="Investments" <%= category.categoryname === 'Investments' ? 'selected' : '' %>>Investments</option>
                                                        </select>
                                                    </td>
                                                    
                                                    <td>
                                                        <div class="budget-goal-container">
                                                            <span class="currency-symbol">$</span>
                                                            <input type="number" class="budget" id="budget" value="<%= category.budget %>" name="budget" placeholder="<%= category.budget %>" step="0.01" required>
                                                            <span class="per-month-text">per month</span>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <button type="submit" class="Save-category" style="background-color: var(--theme-color); color: white;">Save</button>
                                                    </td>
                                                    <td>
                                                        <!-- Edit -->
                                                        <button type="button" class="delete-category" style="background-color: #c82333;" onclick="toggleEditForm('<%= category.categoryid %>')">
                                                            Cancel
                                                        </button>                                        
                                                    </td>
                                                    
                                                </form>
                                            </div>
                                        </tr>
                                    </tr>
                                    
                                <% }); %>
                            <% } else { %>
                                <tr>
                                    <td colspan="5" style="text-align: center;">No income categories available.</td>
                                </tr>
                            <% } %>
                            <form action="/save-category" method="POST" class="category-form">
                            <tr class="income-category-row">
                                <td>
                                    <!-- Dropdown for Icon (Emoji) -->
                                    <select name="icon" id="icon" required>
                                        <option value="ğŸ¥‡">ğŸ¥‡ (1st Place Medal)</option>
                                        <option value="ğŸš‘">ğŸš‘ (Ambulance)</option>
                                        <option value="ğŸ‘¶">ğŸ‘¶ (Baby)</option>
                                        <option value="âš–ï¸">âš–ï¸ (Balance Scale)</option>
                                        <option value="ğŸ“Š">ğŸ“Š (Bar Chart)</option>
                                        <option value="ğŸ€">ğŸ€ (Basketball)</option>
                                        <option value="ğŸ“š">ğŸ“š (Books)</option>
                                        <option value="ğŸ’¼">ğŸ’¼ (Briefcase)</option>
                                        <option value="ğŸ§¹">ğŸ§¹ (Broom)</option>
                                        <option value="ğŸš—">ğŸš— (Car)</option>
                                        <option value="ğŸ¥•">ğŸ¥• (Carrot)</option>
                                        <option value="ğŸ“‰">ğŸ“‰ (Chart Decreasing)</option>
                                        <option value="ğŸ“ˆ">ğŸ“ˆ (Chart Increasing)</option>
                                        <option value="ğŸ¬">ğŸ¬ (Clapper Board)</option>
                                        <option value="ğŸª">ğŸª (Convenience Store)</option>
                                        <option value="ğŸ’³">ğŸ’³ (Credit Card)</option>
                                        <option value="ğŸ–¥ï¸">ğŸ–¥ï¸ (Desktop Computer)</option>
                                        <option value="ğŸ•">ğŸ• (Dog)</option>
                                        <option value="ğŸ’µ">ğŸ’µ (Dollar Banknote)</option>
                                        <option value="ğŸ‘—">ğŸ‘— (Dress)</option>
                                        <option value="ğŸ“€">ğŸ“€ (DVD)</option>
                                        <option value="ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ (Family)</option>
                                        <option value="ğŸ">ğŸ (Gift)</option>
                                        <option value="ğŸŒ">ğŸŒ (Globe with Meridians)</option>
                                        <option value="ğŸ“">ğŸ“ (Graduation Cap)</option>
                                        <option value="ğŸ› ï¸">ğŸ› ï¸ (Hammer and Wrench)</option>
                                        <option value="ğŸ¤">ğŸ¤ (Handshake)</option>
                                        <option value="ğŸ§">ğŸ§ (Headphone)</option>
                                        <option value="â¤ï¸">â¤ï¸ (Heart)</option>
                                        <option value="ğŸ ">ğŸ  (House)</option>
                                        <option value="ğŸ˜ï¸">ğŸ˜ï¸ (Houses)</option>
                                        <option value="ğŸ’¡">ğŸ’¡ (Light Bulb)</option>
                                        <option value="ğŸ’°">ğŸ’° (Money Bag)</option>
                                        <option value="ğŸ’¸">ğŸ’¸ (Money with Wings)</option>
                                        <option value="ğŸ§“">ğŸ§“ (Older Person)</option>
                                        <option value="ğŸ“±">ğŸ“± (Phone)</option>
                                        <option value="ğŸ’Š">ğŸ’Š (Pill)</option>
                                        <option value="ğŸ½ï¸">ğŸ½ï¸ (Plate with Cutlery)</option>
                                        <option value="ğŸ’">ğŸ’ (Ring)</option>
                                        <option value="ğŸ©º">ğŸ©º (Stethoscope)</option>
                                        <option value="ğŸ”§">ğŸ”§ (Wrench)</option>
                                        <option value="âœˆï¸">âœˆï¸ (Airplane)</option>
                                    </select>
                                </td>
                                <td>
                                    <!-- Dropdown for Category Selection -->
                                    <select name="categoryname" id="categoryname" class="category-select" required>
                                        <option value="Paycheck">Paycheck</option>
                                        <option value="Scholarships">Scholarships</option>
                                        <option value="Student Loan Receipt">Student Loan Receipt</option>
                                        <option value="Family Support">Family Support</option>
                                        <option value="Grants">Grants</option>
                                        <option value="Gifts">Gifts</option>
                                        <option value="Investments">Investments</option>
                                    </select>
                                </td>
                                <td>
                                    <!-- Budget Goal Input -->
                                    <div class="budget-goal-container">
                                        <span class="currency-symbol">$</span>
                                        <input type="number" class="budget" id="budget" name="budget" placeholder="0.00" step="0.01" required>
                                        <span class="per-month-text">per month</span>
                                    </div>
                                </td>
                                <td>
                                    <!-- Save Button -->
                                    <button type="submit" class="Save-category" style="background-color: var(--theme-color); color: white;">Save</button>
                                </td>
                                <td>
                                    <!-- Delete Button Form -->
                                    <button type="submit" class="delete-empty-category" style="background-color: #c82333;">Delete</button>
                                </td>
                                <td>
                                    <input type="hidden" name="type" value="I">
                                </td>
                            </tr>
                        </tbody>
                    </table> 
                </form>
                    <br>
                    <button type="button" class="add-new-income-category" style="background-color: var(--theme-color); color: white;">Add New Income Category</button>
                </div>
                <br>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer" style="background-color: var(--theme-color); color: white;">
        &copy; 2024 CashCow. All rights reserved.
    </footer>
    <!--Reference to javascript in the settings.js file-->

    <script src="/js/settings.js"></script>
</body>
</html>